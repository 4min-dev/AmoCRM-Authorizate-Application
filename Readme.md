# Интеграция с amoCRM

Это руководство поможет вам создать и настроить интеграцию с amoCRM. Интеграция может быть как приватной (для использования в рамках одного аккаунта), так и внешней (для публичного использования).

## Шаги по созданию интеграции

1. **Вход в аккаунт amoCRM**
   - Авторизуйтесь в своем аккаунте amoCRM.

2. **Переход в amoMarket**
   - В левом меню нажмите на раздел **amoMarket**.

3. **Создание интеграции**
   - В правом верхнем углу нажмите на троеточие (рядом с кнопкой **Web Hooks**).
   - Выберите **Создать интеграцию**.

4. **Выбор типа интеграции**
   - **Приватная** — интеграция будет доступна только в рамках одного аккаунта. Подходит для личных тестов.
   - **Внешняя** — интеграция может быть использована извне. Подходит для публичных проектов.

5. **Заполнение полей**
   - **Обязательные поля:**
     - Заголовок
     - Описание
     - Права доступа
   - **Дополнительные поля:**
     - **Ссылка для перенаправления** — URL, на который пользователь будет перенаправлен после успешной авторизации.
     - **Ссылка для отключения вебхука** — URL для уведомлений об отключении интеграции (необязательно).
     - **Предоставить доступ** — настройка прав доступа для взаимодействия через API (добавление, удаление данных и т.д.).
     - **Контроль дублей** — предотвращение дублирования сделок.
     - **Множественные источники** — возможность подключения различных источников (email, Telegram, 1C и т.д.) к сделкам.

6. **Сохранение интеграции**
   - После заполнения всех полей нажмите **Сохранить**.

7. **Получение ключей доступа**
   - Перейдите в раздел **Установленные** в левом меню.
   - Откройте созданную интеграцию и перейдите в **Ключи и доступы**.
   - Скопируйте:
     - **Секретный ключ**
     - **ID интеграции**

## Настройка и запуск проекта

1. **Клонирование репозитория**
   - Клонируйте репозиторий:
     ```bash
     git clone https://git.wizardstech.ru/TechWizards/amoCRM_authorizate
     ```

2. **Установка зависимостей**
   - Перейдите в корневую папку проекта и выполните:
     ```bash
     npm install
     ```

3. **Настройка файлов**
   - В файлах `index.js` и `server.js` найдите комментарии и замените указанные значения на свои.

4. **Запуск сервера**
   - Запустите сервер:
     ```bash
     npm run start
     ```

5. **Запуск клиента**
   - Откройте файл `index.html` в браузере.

6. **Авторизация**
   - Нажмите кнопку **Авторизация**, выберите свой аккаунт и разрешите доступ.
   - После успешной авторизации в URL появится параметр `code`.

7. **Обмен кода на токен**
   - Нажмите кнопку **Обменять код**.
   - Если все прошло успешно, вы получите `accessToken` и `refreshToken`. Если результат `undefined`, повторите обмен.

## Ссылки

- [Репозиторий проекта](https://github.com/4min-dev/AmoCRM-Authorizate-Application)

---

Следуя этим шагам, вы сможете успешно создать и настроить интеграцию с amoCRM. Удачи!
